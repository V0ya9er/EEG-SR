hydra:
  run:
    dir: outputs/${dataset.name}_${model.name}_${sr.mechanism.name}_${sr.noise.name}_fold${dataset.fold_id}_D${sr.mechanism.intensity}
  sweep:
    dir: outputs/multirun
    subdir: ${dataset.name}_${model.name}_${sr.mechanism.name}_${sr.noise.name}_fold${dataset.fold_id}_D${sr.mechanism.intensity}

defaults:
  - _self_
  - dataset: bci2a_loso    # LOSO 优先设计
  - model: conformer       # Conformer 作为默认模型
  - sr/mechanism: additive
  - sr/noise: gaussian

trainer:
  _target_: pytorch_lightning.Trainer
  max_epochs: 50
  accelerator: "auto"
  devices: "auto"
  strategy: "auto"
  precision: "16-mixed"       # 混合精度训练
  log_every_n_steps: 10
  check_val_every_n_epoch: 1

# Callbacks 配置
callbacks:
  early_stopping:
    _target_: pytorch_lightning.callbacks.EarlyStopping
    monitor: "val_loss"
    patience: 10
    mode: "min"
    verbose: true
    min_delta: 0.001
  
  model_checkpoint:
    _target_: pytorch_lightning.callbacks.ModelCheckpoint
    monitor: "val_loss"
    mode: "min"
    save_top_k: 1
    save_last: true
    filename: "best-{epoch:02d}-{val_loss:.4f}"
    verbose: true

seed: 42